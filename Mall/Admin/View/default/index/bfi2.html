<!DOCTYPE html>
<!-- release v4.3.6, copyright 2014 - 2017 Kartik Visweswaran -->
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>Bootstrup 3可预览的HTML5文件上传插件</title>
        <link href="http://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="<{$Think.const.STATIC_URL}>bootFileInput/css/default.css">
        <link href="<{$Think.const.STATIC_URL}>bootFileInput/css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="htmleaf-container">
            <div class="container kv-main">
                <h4>支持多种语言</h4>
                <form enctype="multipart/form-data">
                    <label>简体中文</label>
                    <input id="file-0" name="file-zh[]" type="file" multiple class="file-loading">
                </form>             
            </div>
        </div> 
        <div class="form-group">
            <label class="col-sm-2 control-label">上传图片：</label>
            <div id="formimageshow" class="formControls col-xs-2 col-sm-2">
                <button id="btnShow" type="button" class="btn btn-success" onclick="uploadfileshow();return false;">上传轮播图片</button>
                <br>
                <label for="checkbox-1">最多支持4张轮播图</label>
            </div>
        </div>
        <script src="http://cdn.bootcss.com/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
        <script src="http://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="<{$Think.const.STATIC_URL}>bootFileInput/js/fileinput.js" type="text/javascript"></script>
        <script src="<{$Think.const.STATIC_URL}>bootFileInput/js/locales/zh.js" type="text/javascript"></script>
    <script>
    $(document).ready(function() {
        //图片上传
        initFileInput("file-0","<{:U('upload')}>");
        //监听事件
        $("#file-0").on("fileuploaded",function(event,data,previewId,index){
            console.log(data.response);
            // console.log(data.response['gg']);
        });
    });
    function initFileInput(id,url){
        var control=$('#'+id);
        control.fileinput({
            language: 'zh',
            uploadUrl: url,
            allowedFileExtensions : ['jpg', 'png','gif','jpeg'],
            showUpload:true, //显示上传按钮
            showCaption:true,//显示标题
            showPreview:true,//显示文件预览图
            showRemove:true, //显示删除/清空按钮
            browseClass:"btn btn-primary",//按钮样式
            //previewFileIcon:"<i class='glyphicon glyphicon-king'></i>",//非图像文件时的图
            maxFileCount:4,//最大文件个数
            dropZoneEnabled:true,//显示拖拽区域
            maxFileSize: 31245728,
            // overwriteInitial: false,//是否覆盖已存在的图片默认覆盖

            initialPreviewConfig:{
                caption: id,
                width:'120px',
                url:url,
                key:101,
                success:function(){

                }
            }
        });   
    }
    </script>
    </body>
</html>